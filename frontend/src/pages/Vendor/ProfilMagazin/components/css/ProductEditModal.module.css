/* =========================================
   ProductEditModal.module.css
   Premium, accesibil, responsive
   ========================================= */

/* ---- Container intern (folosește <Modal> ca wrapper) ---- */
:root {
  --pem-gap: 14px;                /* gap vertical între rânduri */
  --pem-pad: 16px;                /* padding lateral intern */
  --pem-maxw: 720px;              /* sincron cu prop-ul de maxWidth al Modal */
  --pem-radius: var(--radius);    /* respectă radius global */
}

/* =========================================================
   Header (sticky) + acțiuni
   ========================================================= */
.header {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px var(--pem-pad);
  margin: -8px calc(var(--pem-pad) * -1) 12px;
  background: var(--surface);
  border-bottom: 1px solid var(--color-border);
  box-shadow: 0 6px 10px rgba(0,0,0,.02);
}

.title {
  font-family: var(--font-title);
  font-weight: 800;
  font-size: 1.1rem;
  margin: 0;
  color: var(--color-text);
  letter-spacing: .2px;
}

.spacer { flex: 1; }

/* =========================================================
   Butoane
   ========================================================= */
.btn,
.btnPrimary,
.smallBtn {
  border-radius: var(--pem-radius);
  padding: 10px 12px;
  font: 600 .95rem/1 var(--font-body);
  cursor: pointer;
  border: 1px solid var(--color-border);
  background: var(--surface);
  color: var(--color-text);
  box-shadow: var(--shadow-sm);
  transition: transform .04s ease, box-shadow .18s ease, background .18s ease, color .18s ease, border-color .18s ease;
  will-change: transform;
}

.btn:hover,
.smallBtn:hover {
  box-shadow: var(--shadow-md);
  border-color: color-mix(in srgb, var(--color-primary) 25%, var(--color-border));
}
.btn:active,
.btnPrimary:active,
.smallBtn:active { transform: translateY(1px); }
.btn:disabled,
.btnPrimary:disabled,
.smallBtn:disabled { opacity: .65; cursor: not-allowed; box-shadow: none; }

.btnPrimary {
  background: var(--color-primary);
  color: #fff;
  border-color: transparent;
}
.btnPrimary:hover { background: var(--color-hover); box-shadow: var(--shadow-md); }

.smallBtn {
  padding: 7px 10px;
}

/* =========================================================
   Mesaje de stare
   ========================================================= */
.loading {
  padding: 12px var(--pem-pad);
  color: var(--color-muted);
}
.error {
  margin: 0 var(--pem-pad);
  background: color-mix(in srgb, var(--color-danger) 8%, var(--surface));
  color: var(--color-danger);
  padding: 10px 12px;
  border: 1px solid color-mix(in srgb, var(--color-danger) 24%, var(--color-border));
  border-radius: var(--pem-radius);
}

/* =========================================================
   Formular
   ========================================================= */
.form {
  display: flex;
  flex-direction: column;
  gap: var(--pem-gap);
  padding: 0 var(--pem-pad) var(--pem-pad);
  max-width: var(--pem-maxw);
  margin: 0 auto;
}

.row { display: flex; flex-direction: column; gap: 6px; }

.grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 12px;
  align-items: end;
}

/* Layout inteligent: price(4) + currency(3) + category(4) + active(1) pe ecrane mari */
.grid > .row:nth-child(1) { grid-column: span 4; min-width: 180px; }
.grid > .row:nth-child(2) { grid-column: span 3; min-width: 140px; }
.grid > .row:nth-child(3) { grid-column: span 4; min-width: 200px; }
.rowCheck                 { grid-column: span 1; display: flex; align-items: center; justify-content: flex-start; }

/* Etichete */
.label {
  font-weight: 700;
  color: var(--color-text);
  letter-spacing: .2px;
}

/* Inputs */
.input,
.textarea,
select {
  width: 100%;
  background: var(--surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: var(--pem-radius);
  padding: 10px 12px;
  box-shadow: var(--shadow-sm);
  transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;
}

.input::placeholder,
.textarea::placeholder { color: var(--color-muted); }

.input:focus,
.textarea:focus,
select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);
  background: color-mix(in srgb, var(--surface) 92%, var(--color-primary) 8%);
}

/* Checkbox */
.checkbox { display: inline-flex; align-items: center; gap: 8px; color: var(--color-text); }
.checkbox input { width: 18px; height: 18px; }

/* =========================================================
   Zona imagini
   ========================================================= */
.rowHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.images {
  list-style: none;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(128px, 1fr));
  gap: 10px;
  margin: 0;
  padding: 0;
}

.imageItem {
  position: relative;
  border: 1px solid var(--color-border);
  border-radius: var(--pem-radius);
  overflow: hidden;
  background: var(--surface);
  box-shadow: var(--shadow-sm);
}

.image {
  width: 100%;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  background: var(--color-bg);
}

.imageBtns {
  display: flex;
  gap: 6px;
  position: absolute;
  bottom: 6px;
  right: 6px;
  background: color-mix(in srgb, var(--surface) 88%, transparent);
  border: 1px solid var(--color-border);
  border-radius: calc(var(--pem-radius) - 2px);
  padding: 4px 6px;
  box-shadow: var(--shadow-sm);
}

.imageBtns > button {
  border: 1px solid var(--color-border);
  background: var(--surface);
  color: var(--color-text);
  border-radius: calc(var(--pem-radius) - 4px);
  padding: 6px 10px;            /* touch target mai mare */
  cursor: pointer;
  font: 600 .9rem/1 var(--font-body);
  transition: background .18s ease, color .18s ease, border-color .18s ease, transform .06s ease;
}
.imageBtns > button:hover {
  border-color: var(--color-hover);
  color: var(--color-hover);
}
.imageBtns > button:active { transform: translateY(1px); }

.tip {
  color: var(--color-muted);
  font-size: .9rem;
}

/* Empty */
.empty {
  padding: 12px;
  border: 1px dashed var(--color-border);
  border-radius: var(--pem-radius);
  color: var(--color-muted);
  background: var(--surface);
}

/* =========================================================
   Accesibilitate: focus vizibil
   ========================================================= */
:where(button, .input, .textarea, select, a):focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-primary) 55%, transparent);
  outline-offset: 2px;
}

/* =========================================================
   Responsive
   ========================================================= */

/* Tablete: ușor mai strâns */
@media (max-width: 900px) {
  .header { padding: 12px var(--pem-pad); }
  .title  { font-size: 1.05rem; }
  .grid   { gap: 10px; }
}

/* Mobile mare */
@media (max-width: 640px) {
  :root { --pem-pad: 14px; }

  .header {
    margin-left: calc(var(--pem-pad) * -1);
    margin-right: calc(var(--pem-pad) * -1);
  }

  /* Stivuim grid-ul în 2 coloane largi */
  .grid { grid-template-columns: 1fr 1fr; }
  .grid > .row:nth-child(1),
  .grid > .row:nth-child(2),
  .grid > .row:nth-child(3) { grid-column: span 1; }
  .rowCheck { grid-column: span 2; justify-content: flex-start; }

  .images { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
}

/* Mobile mic */
@media (max-width: 420px) {
  :root { --pem-pad: 12px; }
  .title { font-size: 1rem; }
  .btn, .btnPrimary { padding: 9px 10px; }

  /* o singură coloană pentru grid */
  .grid { grid-template-columns: 1fr; }
  .grid > .row:nth-child(1),
  .grid > .row:nth-child(2),
  .grid > .row:nth-child(3),
  .rowCheck { grid-column: 1 / -1; }

  .images { grid-template-columns: repeat(2, 1fr); }
}

/* Ecrane foarte late: centrare conținut, limită max-width */
@media (min-width: 1280px) {
  .form { max-width: var(--pem-maxw); }
}

/* =========================================================
   Preferințe sistem
   ========================================================= */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* Droparea + thumbs + butoane mici */
.dropArea {
  border: 2px dashed var(--color-border, #e5e7eb);
  border-radius: 12px;
  padding: 12px;
  background: color-mix(in oklab, var(--surface, #fff), black 2%);
  transition: border-color .15s ease, background-color .15s ease;
}
.dropArea:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-primary), transparent 70%);
}
.dropOver {
  border-color: var(--color-primary, #2563eb);
  background: color-mix(in oklab, var(--surface, #fff), var(--color-primary) 3%);
}
.dropHint { color: #6b7280; font-size: .86rem; margin-bottom: 8px; }
.imgTools { display: inline-flex; gap: 8px; }

.thumbGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 8px;
}
.thumbItem {
  position: relative;
  border: 1px solid var(--color-border, #e5e7eb);
  border-radius: 10px;
  overflow: hidden;
  background: #fff;
  cursor: grab;
}
.thumbItem:active { cursor: grabbing; }
.thumbImg {
  width: 100%;
  height: 110px;
  object-fit: cover;
  display: block;
}
.thumbBar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  padding: 6px;
  background: color-mix(in oklab, var(--surface, #fff), black 2%);
  border-top: 1px solid var(--color-border, #e5e7eb);
}
.thumbBtns { display: inline-flex; gap: 6px; }

.smallBtn {
  background: color-mix(in oklab, var(--surface, #fff), black 2%);
  border: 1px solid var(--color-border, #e5e7eb);
  border-radius: 8px;
  padding: 6px 8px;
  font-size: .82rem;
  cursor: pointer;
}
.smallBtn:hover { background: color-mix(in oklab, var(--surface, #fff), black 4%); }
.smallBtnDanger {
  background: color-mix(in oklab, #ef4444, white 92%);
  border: 1px solid color-mix(in oklab, #ef4444, transparent 60%);
  border-radius: 8px;
  padding: 6px 8px;
  font-size: .82rem;
  cursor: pointer;
  color: #991b1b;
}
.primaryMark {
  border-color: color-mix(in oklab, var(--color-primary, #2563eb), transparent 50%);
  color: var(--color-primary, #2563eb);
  font-weight: 700;
}
